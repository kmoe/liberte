Repositories and mirrors
========================

stage3 and portage snapshots
  + http://distfiles.gentoo.org
  [mkroot]

webrsync and portage packages
  + http://distfiles.gentoo.org
  + http://mirrors.kernel.org/gentoo
  [/etc/portage/make.conf]

rsync
  + disabled
  [/etc/portage/make.conf]

HKP(S)
  + hkp://2eghzlv2wwcq7u7y.onion               [anon]
  + [alt: hkps://zimmermann.mayfirst.org]
  + [alt: hkps://keys.indymedia.org]
  + [alt: x-hkp://pool.sks-keyservers.net]
  + [alt: x-hkp://keys.gnupg.net]

NTP
  + [0-3].pool.ntp.org



SSL/TLS implementations
=======================

package                 supports                uses            used by
_______________________________________________________________________

xorg-server             ssl                     ssl
libarchive              ssl                     ssl
opensc                  ssl                     ssl

tor                     ssl                     ssl
libevent                ssl                     ssl             tor
aircrack-ng             ssl                     ssl

networkmanager          gnutls, nss             gnutls
wpa_supplicant          ssl, gnutls, libtom     ssl             networkmanager
vpnc                    ssl, gnutls             gnutls          networkmanager-vpnc
openvpn                 ssl, polarssl           ssl             networkmanager-openvpn
pkcs11-helper           !ssl, gnutls, nss       ssl             openvpn

glib-networking         gnutls                  gnutls          libsoup
libsoup                 gnutls                  gnutls
libmicrohttpd           gnutls                  gnutls          cables
curl                    ssl, gnutls, nss        ssl             cables, gnupg
wget                    ssl, gnutls             ssl             portage

firefox                 nss                     nss
hexchat                 ssl                     ssl


libgcrypt users: cryptsetup, gnupg, gnome-keyring,
                 networkmanager, glib-networking, gnupg-pkcs11-scd, ntfs3g



Encryption / Signing
====================

Secure Boot
  + RSA-4096 / SHA-256 EFI images signing

GRUB EFI images
  + SHA-256 of chained GRUB configuration

GRUB (chained configuration)
  + SHA-256 of kernel+initramfs

Kernel
  + RSA-4096 / SHA-256 module signing

SquashFS image
  + SHA-256 DM-Verity in initramfs

LUKS
  + AES-256 / XTS (w/ double key size)
  + SHA-512 LUKS header hashing
  + OTFE-compatible

mcrypt
  + AES-128 / CFB
  + S2K-ISALTED-SHA1 password hashing
  + OpenPGP-compatible

shadow
  + SHA-256 password hashing
  + salted + 5000 rounds

GnuPG(SM)
  + AES-256 / CFB underlying symmetric cipher
  + SHA-1   digest for DSA-1024, RSA-[1024..4096] signature keys
  + SHA-256 digest for DSA-[2048..3072]           signature keys

alock
  + SHA-256 password hashing


Password management
===================

GPG Agent:     used by GgnuPG, GPA [password entry: Pinentry]
GNOME Keyring: used by nm-applet   [password entry: native]
xlock:         custom script       [password entry: Pinentry]


File permissions
================

Boot media
  [anon] rw------- / rwx------

Home directory
  umask 077
  [anon] rw------- / rwx------

Persistence directory (cryptsetup)
  [anon] rw------- / rwx------

Automounted directories
  [anon] rw------- / rwx------ [rw]
  [anon] r-------- / r-x------ [ro]



ACLs and extended attributes
============================

ACLS
  + ACL changes propagate to tmpfs via overlayfs
  + ACL reads can propagate to SquashFS, which supports xattrs and ACLs

Extended attributes
  + user xattrs are not supported by tmpfs
  + xattr change requests propagate to the underlying (ro) SquashFS
  + xattr reads propagate to SquashFS, which supports xattrs

configuration persistence
  + ACLs are stored along regular permissions using bsdtar

(auto)mounted directories
  + NTFS: user.* xattrs correspond to NTFS streams
  + ext2/3/4 removable media is mounted with ACLs and user.* xattrs


Proxification
=============

Tor                              (127.0.0.1:9050)
  Privoxy                        (127.0.0.1:8118)
    environment variables        (http(s)_proxy, no_proxy)
      curl
        cables
        GnuPG
        mpg123
        vorbis-tools[ogg123]
      wget
      libproxy[-gnome]
        glib-networking[-gnome]  (glib GIO modules)
          libsoup                (HTTP library)
            libsoup-gnome        (GNOME libsoup plugin)
              Totem              (Playlist parser)
            NetworkManager       (connectivity checking)
      libxml2                    (NanoHTTP)
      libmms
          gst-plugins-libmms     (GStreamer MMS plugin)
    explicit configuration
      uim                        (custom-http.scm)
  explicit configuration
    Firefox                      (environment and GConf are supported)
    HexChat
    SSH
    OpenVPN
  torify
    whois
